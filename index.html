<!DOCTYPE html>
<html lang="es">
<head>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2563eb">
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CleanControl Elite</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .tab-content { display: none; }
        .tab-content.active { display: block; animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .active-nav { color: #2563eb; transform: translateY(-5px); transition: all 0.3s; }
        .day-node { aspect-ratio: 1/1; display: flex; align-items: center; justify-content: center; border-radius: 12px; cursor: pointer; transition: 0.2s; }
        .has-job { background-color: #dbeafe; font-weight: bold; color: #1e40af; border: 1px solid #bfdbfe; }
        .selected-day { background-color: #2563eb !important; color: white !important; box-shadow: 0 4px 12px rgba(37,99,235,0.4); }
        
        #editModal { background: rgba(0,0,0,0.5); backdrop-filter: blur(4px); display: none; }
        #editModal.active { display: flex; animation: fadeIn 0.2s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        #toast { position: fixed; bottom: 100px; left: 50%; transform: translateX(-50%); background: #10b981; color: white; padding: 12px 24px; border-radius: 99px; font-weight: 800; font-size: 12px; text-transform: uppercase; z-index: 100; display: none; box-shadow: 0 10px 20px rgba(16,185,129,0.3); }
        
        .header-card { background: linear-gradient(135deg, #2563eb 0%, #1d4ed8 100%); }
    </style>
</head>
<body class="bg-slate-50 pb-28 text-slate-800 font-medium">

    <div id="toast">✅ Operación exitosa</div>

    <div id="editModal" class="fixed inset-0 z-[100] items-center justify-center p-6">
        <div class="bg-white w-full max-w-xs rounded-[2.5rem] p-8 shadow-2xl space-y-4 animate-slideUp">
            <h3 class="text-center font-black text-slate-800 uppercase text-xs tracking-widest">Editar Jornada</h3>
            <div class="space-y-4">
                <div>
                    <label class="text-[9px] font-bold text-slate-400 ml-2 uppercase">Entrada</label>
                    <input type="time" id="editInicio" class="w-full bg-slate-100 p-4 rounded-2xl border-none text-sm outline-none">
                </div>
                <div>
                    <label class="text-[9px] font-bold text-slate-400 ml-2 uppercase">Salida</label>
                    <input type="time" id="editFin" class="w-full bg-slate-100 p-4 rounded-2xl border-none text-sm outline-none">
                </div>
                <div>
                    <label class="text-[9px] font-bold text-slate-400 ml-2 uppercase">Observaciones</label>
                    <textarea id="editObservacion" class="w-full bg-slate-100 p-4 rounded-2xl border-none text-sm outline-none resize-none" rows="2"></textarea>
                </div>
            </div>
            <div class="flex flex-col gap-2 pt-2">
                <button onclick="guardarEdicionRapida()" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black text-xs uppercase shadow-lg">Actualizar</button>
                <button onclick="cerrarEdicionRapida()" class="w-full text-slate-400 py-2 font-bold text-[10px] uppercase">Cancelar</button>
            </div>
        </div>
    </div>

    <header class="bg-white/80 backdrop-blur-md shadow-sm p-4 sticky top-0 z-50 flex justify-between items-center border-b border-slate-100">
        <h1 class="text-xl font-black text-blue-600 italic tracking-tighter">CLEANCONTROL</h1>
    </header>

    <main class="p-4 max-w-md mx-auto">
        
        <section id="registro" class="tab-content active">
            <div class="mb-8">
                <h2 id="clientTitle" class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-3">Mis Clientas</h2>
                <div class="bg-white p-4 rounded-[2rem] shadow-sm border border-slate-100 mb-4">
                    <div class="flex gap-2 mb-2">
                        <input type="text" id="nombreClienta" placeholder="Nombre" class="flex-1 bg-slate-100 p-3 rounded-xl outline-none text-sm border-none">
                        <input type="number" id="tarifaHora" placeholder="€/h" class="w-20 bg-slate-100 p-3 rounded-xl outline-none text-sm border-none">
                        <button id="btnGuardarClienta" onclick="guardarClienta()" class="bg-blue-600 text-white w-12 h-12 rounded-xl flex items-center justify-center shadow-lg"><i class="fas fa-plus"></i></button>
                    </div>
                    <button id="cancelClientEdit" onclick="resetClientForm()" class="hidden w-full text-[10px] text-red-500 font-bold uppercase mb-2">Cancelar edición</button>
                    <div id="listaClientas" class="flex flex-wrap gap-2 text-sm"></div>
                </div>
            </div>

            <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-3">Anotar Jornada</h2>
            <form id="jobForm" class="bg-white p-6 rounded-[2.5rem] shadow-xl border border-slate-100 space-y-4">
                <div class="space-y-1">
                    <label class="text-[10px] text-slate-400 ml-2 font-bold uppercase">Cliente</label>
                    <select id="selectClienta" class="w-full bg-slate-100 p-4 rounded-2xl outline-none border-none text-sm" required>
                        <option value="">¿Para quién?</option>
                    </select>
                </div>

                <div class="space-y-1">
                    <label class="text-[10px] text-slate-400 ml-2 font-bold uppercase">Fecha del servicio</label>
                    <input type="date" id="fecha" class="w-full bg-slate-100 p-4 rounded-2xl border-none text-sm" required>
                </div>

                <div class="grid grid-cols-2 gap-4">
                    <div class="space-y-1">
                        <label class="text-[10px] text-slate-400 ml-2 font-bold uppercase">Hora Entrada</label>
                        <input type="time" id="horaInicio" class="w-full bg-slate-100 p-4 rounded-2xl border-none text-sm" required>
                    </div>
                    <div class="space-y-1">
                        <label class="text-[10px] text-slate-400 ml-2 font-bold uppercase">Hora Salida</label>
                        <input type="time" id="horaFin" class="w-full bg-slate-100 p-4 rounded-2xl border-none text-sm" required>
                    </div>
                </div>

                <div class="space-y-1">
                    <label class="text-[10px] text-slate-400 ml-2 font-bold uppercase">Observaciones (Opcional)</label>
                    <textarea id="observacion" class="w-full bg-slate-100 p-4 rounded-2xl border-none text-sm outline-none resize-none" rows="2" placeholder="Ej: Cristales, plancha..."></textarea>
                </div>

                <div class="flex items-center gap-2 p-2">
                    <input type="checkbox" id="pagado" checked class="w-5 h-5 accent-blue-600">
                    <label for="pagado" class="text-sm font-bold">¿Ya lo has cobrado?</label>
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black shadow-lg uppercase">Guardar Jornada</button>
            </form>
        </section>

        <section id="calendario" class="tab-content">
            <div class="header-card p-6 rounded-[2.5rem] text-white shadow-xl mb-6 relative overflow-hidden">
                <div class="relative z-10 flex justify-between items-start">
                    <div>
                        <p id="statsLabel" class="text-[10px] font-bold opacity-80 uppercase tracking-widest">Ganancias Mes Actual</p>
                        <h2 id="mainDisplayAmount" class="text-4xl font-black mt-1">0.00€</h2>
                        <p id="statsSubLabel" class="text-[10px] font-bold mt-2 text-blue-200 uppercase tracking-tighter">Pendiente: 0.00€</p>
                    </div>
                    <button onclick="toggleStatsMode()" class="bg-white/20 p-3 rounded-2xl backdrop-blur-md">
                        <i id="toggleIcon" class="fas fa-calendar-check text-xl"></i>
                    </button>
                </div>
            </div>

            <div class="flex justify-between items-center mb-4 px-2">
                <h2 id="calendarMonth" class="text-xl font-black text-slate-800 capitalize">Mes</h2>
                <div class="flex gap-1 bg-white p-1 rounded-xl border border-slate-100">
                    <button onclick="changeMonth(-1)" class="w-10 h-10 text-blue-600"><i class="fas fa-chevron-left"></i></button>
                    <button onclick="changeMonth(1)" class="w-10 h-10 text-blue-600"><i class="fas fa-chevron-right"></i></button>
                </div>
            </div>

            <div class="bg-white p-4 rounded-[2.5rem] shadow-sm border border-slate-100 mb-6">
                <div class="grid grid-cols-7 gap-1 text-center text-[10px] font-black text-slate-300 mb-4">
                    <span>LUN</span><span>MAR</span><span>MIÉ</span><span>JUE</span><span>VIE</span><span>SÁB</span><span>DOM</span>
                </div>
                <div id="calendarGrid" class="grid grid-cols-7 gap-2 text-center"></div>
            </div>
            <div id="diaDetalle" class="space-y-3 min-h-[50px]"></div>
        </section>

        <section id="config" class="tab-content">
            <h2 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-3">Ranking</h2>
            <div id="statsRanking" class="space-y-3 mb-8"></div>
            
            <div class="space-y-3">
                <button onclick="exportarDatos()" class="w-full bg-blue-50 text-blue-600 py-4 rounded-2xl font-black text-xs uppercase border border-blue-100 flex items-center justify-center gap-2">
                    <i class="fas fa-download"></i> Crear Copia de Seguridad
                </button>
                
                <div class="relative w-full">
                    <input type="file" id="importFile" class="hidden" accept=".json" onchange="importarDatos(event)">
                    <button onclick="document.getElementById('importFile').click()" class="w-full bg-slate-100 text-slate-600 py-4 rounded-2xl font-black text-xs uppercase border border-slate-200 flex items-center justify-center gap-2">
                        <i class="fas fa-upload"></i> Restaurar Copia
                    </button>
                </div>
            </div>
            
            <button onclick="resetApp()" class="w-full text-red-400 font-bold text-[10px] uppercase py-4 mt-4">Borrar todo</button>
        </section>
    </main>

    <nav class="fixed bottom-6 left-6 right-6 bg-white/95 backdrop-blur-md shadow-2xl rounded-[2rem] border border-slate-100 flex justify-around py-4 z-50">
        <button onclick="showTab('registro', this)" class="flex flex-col items-center gap-1 active-nav px-4">
            <i class="fas fa-plus-circle text-xl"></i>
            <span class="text-[9px] font-black uppercase">Anotar</span>
        </button>
        <button onclick="showTab('calendario', this)" class="flex flex-col items-center gap-1 text-slate-300 px-4">
            <i class="fas fa-calendar-alt text-xl"></i>
            <span class="text-[9px] font-black uppercase">Libreta</span>
        </button>
        <button onclick="showTab('config', this)" class="flex flex-col items-center gap-1 text-slate-300 px-4">
            <i class="fas fa-chart-bar text-xl"></i>
            <span class="text-[9px] font-black uppercase">Datos</span>
        </button>
    </nav>

    <script>
        let trabajos = JSON.parse(localStorage.getItem('cc_jobs')) || [];
        let clientas = JSON.parse(localStorage.getItem('cc_clients')) || [];
        let currentDate = new Date();
        let selectedDayStr = new Date().toISOString().split('T')[0];
        let editingClientId = null;
        let quickEditJobId = null;
        let statsMode = 'month';

        function showTab(tabId, el) {
            document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('nav button').forEach(b => b.className = "flex flex-col items-center gap-1 text-slate-300 px-4");
            document.getElementById(tabId).classList.add('active');
            el.className = "flex flex-col items-center gap-1 active-nav px-4";
            if(tabId === 'calendario') initCalendar();
            if(tabId === 'registro') renderClientas();
            if(tabId === 'config') renderStats();
        }

        function guardarClienta() {
    const nombre = document.getElementById('nombreClienta').value.trim();
    const tarifa = parseFloat(document.getElementById('tarifaHora').value);
    
    if(!nombre || isNaN(tarifa)) return;

    if(editingClientId) {
        // Buscamos la clienta en el array de clientas
        const c = clientas.find(x => x.id === editingClientId);
        
        // ACTUALIZACIÓN: Solo modificamos la ficha de la clienta.
        // Hemos eliminado el bucle trabajos.forEach que sobrescribía los servicios pasados.
        c.nombre = nombre; 
        c.tarifa = tarifa;
        
        editingClientId = null;
        showToast("Clienta actualizada (no afecta a servicios pasados)");
    } else {
        clientas.push({ id: Date.now(), nombre, tarifa });
        showToast("Clienta añadida");
    }
    
    save(); 
    renderClientas(); 
    resetClientForm();
}


        function editarClienta(id) {
            const c = clientas.find(x => x.id === id);
            document.getElementById('nombreClienta').value = c.nombre;
            document.getElementById('tarifaHora').value = c.tarifa;
            document.getElementById('clientTitle').innerText = "Editando Clienta";
            document.getElementById('btnGuardarClienta').innerHTML = '<i class="fas fa-check"></i>';
            document.getElementById('cancelClientEdit').classList.remove('hidden');
            editingClientId = id;
            window.scrollTo({top:0, behavior:'smooth'});
        }

        function eliminarClienta(id) {
            if(confirm("¿Eliminar clienta definitivamente?")) {
                clientas = clientas.filter(c => c.id !== id);
                save(); renderClientas(); showToast("Clienta eliminada");
            }
        }

        function resetClientForm() {
            document.getElementById('nombreClienta').value = '';
            document.getElementById('tarifaHora').value = '';
            document.getElementById('clientTitle').innerText = "Mis Clientas";
            document.getElementById('btnGuardarClienta').innerHTML = '<i class="fas fa-plus"></i>';
            document.getElementById('cancelClientEdit').classList.add('hidden');
            editingClientId = null;
        }

        function renderClientas() {
            const container = document.getElementById('listaClientas');
            container.innerHTML = '';
            clientas.forEach(c => {
                container.innerHTML += `
                    <div class="bg-slate-100 pl-4 pr-1 py-1 rounded-full flex items-center gap-2 border border-slate-200">
                        <span class="text-xs font-black">${c.nombre} (${c.tarifa}€)</span>
                        <div class="flex gap-1">
                            <button onclick="editarClienta(${c.id})" class="w-6 h-6 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center text-[10px]"><i class="fas fa-pen"></i></button>
                            <button onclick="eliminarClienta(${c.id})" class="w-6 h-6 rounded-full bg-red-50 text-red-500 flex items-center justify-center text-[10px]"><i class="fas fa-trash"></i></button>
                        </div>
                    </div>`;
            });
            updateClientSelect();
        }

        function updateClientSelect() {
            const select = document.getElementById('selectClienta');
            select.innerHTML = '<option value="">¿Para quién?</option>';
            clientas.forEach(c => select.innerHTML += `<option value="${c.id}">${c.nombre} (${c.tarifa}€/h)</option>`);
        }

        function toggleStatsMode() {
            statsMode = (statsMode === 'month') ? 'year' : 'month';
            const icon = document.getElementById('toggleIcon');
            icon.className = (statsMode === 'month') ? 'fas fa-calendar-check text-xl' : 'fas fa-globe text-xl';
            updateTopStats();
        }

        function updateTopStats() {
            const label = document.getElementById('statsLabel');
            const amount = document.getElementById('mainDisplayAmount');
            const subLabel = document.getElementById('statsSubLabel');
            if(statsMode === 'month') {
                const m = currentDate.getMonth(), y = currentDate.getFullYear();
                let total = 0, pend = 0;
                trabajos.forEach(t => {
                    const d = new Date(t.fecha);
                    if(d.getMonth() === m && d.getFullYear() === y) { total += t.total; if(!t.pagado) pend += t.total; }
                });
                label.innerText = "Ganancias del Mes";
                amount.innerText = `${total.toFixed(2)}€`;
                subLabel.innerText = `Pendiente: ${pend.toFixed(2)}€`;
            } else {
                const y = currentDate.getFullYear();
                const filtered = trabajos.filter(t => new Date(t.fecha).getFullYear() === y);
                label.innerText = `Balance Global ${y}`;
                amount.innerText = `${filtered.reduce((a, t) => a + t.total, 0).toFixed(2)}€`;
                subLabel.innerText = `Servicios: ${filtered.length}`;
            }
        }

        function initCalendar() {
            const grid = document.getElementById('calendarGrid');
            const monthLabel = document.getElementById('calendarMonth');
            grid.innerHTML = '';
            const month = currentDate.getMonth();
            const year = currentDate.getFullYear();
            monthLabel.innerText = new Intl.DateTimeFormat('es-ES', { month: 'long', year: 'numeric' }).format(currentDate);
            let firstDay = new Date(year, month, 1).getDay();
            let adjustedFirstDay = firstDay === 0 ? 6 : firstDay - 1;
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            for(let i = 0; i < adjustedFirstDay; i++) grid.innerHTML += `<div></div>`;
            for(let d = 1; d <= daysInMonth; d++) {
                const dateStr = `${year}-${String(month+1).padStart(2, '0')}-${String(d).padStart(2, '0')}`;
                const hasWork = trabajos.some(t => t.fecha === dateStr);
                const isSelected = selectedDayStr === dateStr ? 'selected-day' : '';
                grid.innerHTML += `<div class="day-node ${isSelected} ${hasWork ? 'has-job' : ''}" onclick="selectDay('${dateStr}')">${d}</div>`;
            }
            renderDetails(); updateTopStats();
        }

        function selectDay(dateStr) { selectedDayStr = dateStr; initCalendar(); }
        function changeMonth(dir) { currentDate.setMonth(currentDate.getMonth() + dir); initCalendar(); }

        function abrirEdicionRapida(id) {
            const t = trabajos.find(x => x.id === id);
            quickEditJobId = id;
            document.getElementById('editInicio').value = t.horaInicio;
            document.getElementById('editFin').value = t.horaFin;
            document.getElementById('editObservacion').value = t.observacion || '';
            document.getElementById('editModal').classList.add('active');
        }

        function cerrarEdicionRapida() { document.getElementById('editModal').classList.remove('active'); quickEditJobId = null; }

        function guardarEdicionRapida() {
            const t = trabajos.find(x => x.id === quickEditJobId);
            const hI = document.getElementById('editInicio').value, 
                  hF = document.getElementById('editFin').value,
                  obs = document.getElementById('editObservacion').value.trim();
            const [h1, m1] = hI.split(':').map(Number), [h2, m2] = hF.split(':').map(Number);
            let horas = (h2 + m2/60) - (h1 + m1/60);
            if (horas <= 0) return;
            t.horaInicio = hI; 
            t.horaFin = hF; 
            t.horas = horas; 
            t.total = horas * t.tarifa;
            t.observacion = obs;
            save(); cerrarEdicionRapida(); initCalendar(); showToast("Actualizado");
        }

        function renderDetails() {
            const container = document.getElementById('diaDetalle');
            const filtered = trabajos.filter(t => t.fecha === selectedDayStr);
            container.innerHTML = `<h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2">Detalle ${selectedDayStr}</h3>`;
            filtered.forEach(t => {
                const obsHtml = t.observacion ? `<p class="text-[11px] text-slate-500 mt-2 italic leading-tight border-l-2 border-blue-200 pl-2">${t.observacion}</p>` : '';
                container.innerHTML += `<div class="bg-white p-4 rounded-3xl shadow-sm border border-slate-50 mb-2">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center gap-3">
                            <button onclick="alternarPago(${t.id})" class="w-8 h-8 rounded-full ${t.pagado ? 'bg-green-100 text-green-600' : 'bg-orange-100 text-orange-600'} flex items-center justify-center text-xs">
                                <i class="fas ${t.pagado ? 'fa-check' : 'fa-clock'}"></i>
                            </button>
                            <div><p class="font-black text-slate-800 text-sm">${t.clienta}</p><p class="text-[10px] text-slate-400">${t.horaInicio} - ${t.horaFin}</p></div>
                        </div>
                        <div class="flex items-center gap-1"><p class="font-black text-blue-600 mr-2">${t.total.toFixed(2)}€</p>
                            <button onclick="abrirEdicionRapida(${t.id})" class="text-blue-400 p-2"><i class="fas fa-pen text-xs"></i></button>
                            <button onclick="eliminarTrabajo(${t.id})" class="text-red-300 p-2"><i class="fas fa-trash-alt text-xs"></i></button>
                        </div>
                    </div>
                    ${obsHtml}
                </div>`;
            });
        }

        document.getElementById('jobForm').onsubmit = (e) => {
            e.preventDefault();
            const clienta = clientas.find(c => c.id == document.getElementById('selectClienta').value);
            const fecha = document.getElementById('fecha').value, 
                  hI = document.getElementById('horaInicio').value, 
                  hF = document.getElementById('horaFin').value,
                  obs = document.getElementById('observacion').value.trim();
            const [h1, m1] = hI.split(':').map(Number), [h2, m2] = hF.split(':').map(Number);
            let horas = (h2 + m2/60) - (h1 + m1/60);
            if (horas <= 0) return;
            trabajos.push({ 
                id: Date.now(), 
                clienta: clienta.nombre, 
                tarifa: clienta.tarifa, 
                fecha, 
                horaInicio: hI, 
                horaFin: hF, 
                horas, 
                total: horas * clienta.tarifa, 
                pagado: document.getElementById('pagado').checked,
                observacion: obs
            });
            save(); e.target.reset(); showToast("Guardado correctamente");
        };

        function alternarPago(id) { const t = trabajos.find(x => x.id === id); t.pagado = !t.pagado; save(); initCalendar(); showToast(t.pagado ? "Pagado" : "Pendiente"); }
        function eliminarTrabajo(id) { if(confirm("¿Eliminar?")) { trabajos = trabajos.filter(t => t.id !== id); save(); initCalendar(); showToast("Eliminado"); } }
        function showToast(msg) { const t = document.getElementById('toast'); t.innerText = "✅ " + msg; t.style.display = 'block'; setTimeout(() => t.style.display = 'none', 2000); }
        function save() { localStorage.setItem('cc_jobs', JSON.stringify(trabajos)); localStorage.setItem('cc_clients', JSON.stringify(clientas)); }
        function resetApp() { if(confirm("¿Borrar todo?")) { localStorage.clear(); location.reload(); } }
        
        function exportarDatos() { 
            const ahora = new Date();
            const fechaStr = ahora.toLocaleDateString('es-ES').replace(/\//g, '-') + '_' + 
                             ahora.getHours() + 'h' + ahora.getMinutes() + 'm';
            const data = { trabajos, clientas, exportDate: ahora.toISOString() };
            const blob = new Blob([JSON.stringify(data)], {type: 'application/json'}); 
            const a = document.createElement('a'); 
            a.href = URL.createObjectURL(blob); 
            a.download = `Copia_Limpia_${fechaStr}.json`; 
            a.click(); 
            showToast("Copia creada");
        }

        function importarDatos(event) {
            const file = event.target.files[0];
            if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (data.trabajos && data.clientas) {
                        if (confirm("¿Restaurar copia? Se borrarán los datos actuales.")) {
                            trabajos = data.trabajos;
                            clientas = data.clientas;
                            save();
                            showToast("Restaurado");
                            setTimeout(() => location.reload(), 1000);
                        }
                    } else { alert("Archivo no válido"); }
                } catch (err) { alert("Error al leer archivo"); }
            };
            reader.readAsText(file);
        }

        function renderStats() {
            const container = document.getElementById('statsRanking'); container.innerHTML = ''; const stats = {};
            trabajos.forEach(t => { if (!stats[t.clienta]) stats[t.clienta] = { total: 0 }; stats[t.clienta].total += t.total; });
            Object.keys(stats).sort((a,b) => stats[b].total - stats[a].total).forEach(k => {
                container.innerHTML += `<div class="bg-white p-4 rounded-3xl flex justify-between shadow-sm border border-slate-100"><span class="font-bold text-sm">${k}</span><span class="text-blue-600 font-black">${stats[k].total.toFixed(2)}€</span></div>`;
            });
        }
        renderClientas(); initCalendar();
    </script>
</body>
</html>
